"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44469],{405899:function(e,n,t){t.r(n),t.d(n,{noRecommendations:function(){return r},savedTo:function(){return i},viewRegistry:function(){return a}});const i=e=>"Saved to \""+e.name+"\"",a=()=>"View registry",r=()=>"No product recommendations"},197068:function(e,n,t){t.d(n,{k:function(){return V}});var i=t(247687),a=t(360991),r=t(995718),l=t(462227),s=t(412193),o=t(344629),d=t(974942),c=t(969538),m=t(942569),u=t(78271),x=t(573893),g=t(289747),p=t(320226),y=t(311342),f=t(80835),h=t(991570),E=t(10552),S=t(590602),v=t(188249),w=t(422613),L=t.n(w),I=t(199079);const N=()=>(0,i.jsx)("ul",{className:"pa0 ma0",children:Array.from({length:4},(e,n)=>(0,i.jsxs)("li",{className:"list list-tile w-100 pb3 flex items-center ".concat(3===n?"":"bb b--near-white mb3"),children:[(0,i.jsx)("div",{className:"mr3",children:(0,i.jsx)(u.Skeleton,{variant:"rounded",height:"20px",width:"20px"})}),(0,i.jsx)(u.Skeleton,{height:"20px",width:"30%"})]},n))}),b=L()(async()=>(await Promise.all([t.e(69902),t.e(54737),t.e(85062),t.e(42417),t.e(37372),t.e(38056),t.e(90071)]).then(t.bind(t,609982))).RegistryTypeSelector,{loadableGenerated:{webpack:()=>[609982]},ssr:!1,loading:()=>(0,i.jsx)(S.Z,{title:(0,s.m)(m,"loadingText")})}),C=()=>{const{addSnack:e}=(0,u.useSnackbar)();return()=>{setTimeout(()=>e({message:(0,s.m)(m,"itemNotsavedToastMessage")}),1e3)}},A=e=>{let{analyticsDetails:n,disableAction:t,initialAction:a,itemImage:r,itemName:l,itemPrice:o,itemType:d,onSuccess:u,updateCacheOnChoose:x,usItemId:g,title:p,pageId:f,pageType:h}=e;const E=C(),{0:v,1:w}=(0,c.useState)(a),[L,{isLoading:I}]=(0,y.Z)(n),N=e=>{let{maxItemsReached:n=!1,registryId:i,registryName:a,registryType:s,setNextNavPage:c=e=>w(e)}=e;L({input:{items:[{itemImage:r,itemName:l,itemPrice:o,itemType:d,usItemId:g}],registryId:i,registryType:s},name:a,maxItemsReached:n,handleMaxItem:()=>{c("MAX_ITEM_LIMIT")},handleError:()=>{E(),t()},handleSuccess:()=>{u(),t()}})};return"ADD"===v?(0,i.jsxs)(i.Fragment,{children:[I&&(0,i.jsx)(S.Z,{title:(0,s.m)(m,"loadingText")}),(0,i.jsx)(R,{handleChoose:()=>{w("CHOOSE")},isLoading:I,onSubmit:N,registryId:f,registryName:p,registryType:h})]}):(0,i.jsxs)(i.Fragment,{children:[I&&(0,i.jsx)(S.Z,{}),(0,i.jsx)(T,{analyticsDetails:n,closeModal:t,initialPage:v,itemType:d,onSubmit:N,updateCacheOnChoose:x,usItemId:g})]})},T=e=>{let{analyticsDetails:n,closeModal:t,initialPage:a,itemType:r,onSubmit:l,usItemId:d}=e;const g=C(),{0:p,1:y}=(0,c.useState)(a),{0:f,1:h}=(0,c.useState)(!0),w={CHOOSE:{pageTitle:f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.VisuallyHidden,{children:(0,s.m)(m,"loadingChoose")}),(0,i.jsx)(u.SkeletonText,{lines:1})]}):(0,s.m)(m,"addItemReg"),component:e=>{let{setPage:a}=e;return(0,i.jsx)(j,{analyticsDetails:n,setLoading:e=>h(e),handleError:()=>{g(),t()},handleNoReg:()=>{y("CREATE_NO_REG")},handleCreate:()=>{a("CREATE")},onSubmit:e=>l({setNextNavPage:e=>a(e),...e})})},button:()=>f?(0,i.jsx)(u.Skeleton,{variant:"rounded",width:"100%",height:"32px"}):(0,i.jsx)(o.Z,{form:"choose-registry",isFullWidth:!0,size:"medium",type:"submit",variant:"primary",children:(0,s.m)(m,"save")})},CREATE:{pageTitle:(0,s.m)(m,"createReg"),component:()=>(0,i.jsx)(_,{analyticsDetails:n,heading:(0,s.m)(m,"whatReg"),itemType:r,usItemId:d}),modalSize:"large"},CREATE_NO_REG:{pageTitle:(0,s.m)(m,"createReg"),component:()=>(0,i.jsx)(_,{analyticsDetails:n,heading:(0,s.m)(m,"createRegistryNoRegistry"),itemType:r,usItemId:d}),modalSize:"large"},MAX_ITEM_LIMIT:{pageTitle:(0,s.m)(m,"itemRegError"),component:()=>(0,i.jsx)(x.ZP,{moduleContext:n.context,name:"maxItemOverlay",pageTitle:n.pageTitle,shouldSetOverlay:!0,children:(0,s.m)(m,"maxRegItems")}),button:()=>(0,i.jsx)(o.Z,{isFullWidth:!0,onClick:t,onLinkName:"close",size:"medium",variant:"primary",children:(0,s.m)(m,"close")})}};return(0,i.jsx)(E.Z,{children:(0,i.jsxs)(i.Fragment,{children:[f&&(0,i.jsx)(S.Z,{}),(0,i.jsx)(v.Z,{getActionButton:(e,n)=>{var t,i;return null===(i=(t=w[n]).button)||void 0===i?void 0:i.call(t)},getSize:e=>{var n;return(null===(n=w[e])||void 0===n?void 0:n.modalSize)||"medium"},initialPage:p,isOpen:!0,onClose:t,pageScope:w},p)]})})},R=e=>{let{handleChoose:n,isLoading:t,onSubmit:i,registryId:a,registryName:r,registryType:l}=e;return(0,c.useEffect)(()=>{t||(r&&a&&l?i({registryId:a,registryName:r,registryType:l}):n())},[]),null},j=e=>{let{analyticsDetails:n,handleCreate:t,handleError:a,handleNoReg:r,onSubmit:l,setLoading:d}=e;const{isFetchError:u,lists:g,showSpinner:p,isSuccess:y,refetch:h}=(0,f.Z)(),{0:E,1:S}=(0,c.useState)(g[0]),v=!!g.length;return(0,c.useEffect)(()=>(h(),()=>{p||d(p)}),[]),(0,c.useEffect)(()=>{d(p),u?a():y&&!v&&r()},[a,r,v,u,y,d,p]),p||!y?(0,i.jsx)(N,{}):(0,i.jsx)(x.ZP,{moduleContext:n.context,moduleViewExtras:n.overlayViewExtras(),name:"addToRegistryOverlayView",pageTitle:n.pageTitle,shouldSetOverlay:!0,children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{className:"mb3 nl1 f6 sans-serif bg-white bw0 underline pointer",onClick:t,onLinkName:"createNewRegistry",useLDButton:!1,children:(0,s.m)(m,"createReg")}),(0,i.jsx)("form",{id:"choose-registry",onSubmit:e=>{e.preventDefault(),d(!0),l({registryId:E.id,registryName:E.name,registryType:E.type})},children:(0,i.jsx)(I.Z,{allowRadioNav:!1,analyticsDetails:n,lists:g,selectList:e=>S(e),selectedList:E||g[0]})})]})})},_=e=>{let{analyticsDetails:n,heading:t,itemType:a,usItemId:r}=e;const{router:l}=(0,g.tv)(),{enableRegistries:s}=(0,h.M)();return(0,i.jsx)(x.ZP,{moduleContext:n.context,name:"createSpecificRegistry",pageTitle:n.pageTitle,shouldSetOverlay:!0,children:(0,i.jsx)(b,{heading:t,onClick:e=>{const n=(0,p.i)({purpose:"CREATE",teachersRegistryEnable:!1,enableRegistries:s})[e],t=new URLSearchParams({usItemId:r,itemType:a}).toString(),i="".concat(n.url,"?").concat(t);l.push(i)},purpose:"CREATE",showTypeDescriptions:!0})})},M=e=>{const{initialElement:n,onLinkName:t,successElement:i,updateCacheOnChoose:a=!1}=(e=>{const n=e.action,t="SECONDARY"===e.variant?"secondary":"primary";switch(n){case"CHOOSE":return{initialElement:{action:n,text:e.text||(0,s.m)(m,"chooseRegMsg"),variant:t},successElement:null,onLinkName:"chooseRegistry"};case"CREATE":return{initialElement:{action:n,text:e.text||(0,s.m)(m,"createRegMsg"),variant:t},successElement:null,onLinkName:"createRegistry"};default:return{initialElement:{action:"ADD",text:e.text||(0,s.m)(m,"addReg"),variant:t},successElement:{leadingButtonIcon:"Check",text:e.buttonSuccessText||(0,s.m)(m,"addedReg")},onLinkName:"addToRegistry",updateCacheOnChoose:!0}}})(e),{0:{action:r,leadingButtonIcon:l,text:o,variant:d},1:u}=(0,c.useState)(n);return{action:r,leadingButtonIcon:l,onLinkName:t,onSuccessElement:()=>{i&&u(i)},text:o,updateCacheOnChoose:a,variant:d}},V=e=>{let{action:n,buttonSuccessClassName:t="bg-white",buttonSuccessText:s,buttonText:m,buttonStyle:u,className:x="",context:g,isFullWidth:p,itemImage:y,itemName:f,itemPrice:h,itemType:E,pageId:S,pageTitle:v,pageType:w,title:L,usItemId:I,variant:N}=e;const b=(0,c.useRef)(null);(0,c.useEffect)(()=>{!b||C||k||setTimeout(()=>{var e;null===(e=b.current)||void 0===e||e.focus()},0)});const{action:C,leadingButtonIcon:T,onLinkName:R,onSuccessElement:j,text:_,updateCacheOnChoose:V,variant:k}=M({action:n,buttonSuccessText:s,text:m,variant:N}),F="ADD"===C?"".concat(_," ").concat(f):_,{onClick:O,isEnableAction:G,disableAction:D}=(()=>{const{0:e,1:n}=(0,c.useState)(!1),{authState:{isLoggedIn:t}}=(0,a.Eu)(),{signIn:i}=(0,r.z)();return{disableAction:()=>{n(!1)},onClick:()=>{t?n(!0):i()},isEnableAction:e}})(),P=w&&S?{ls:{id:S,lt:w,...(L&&{nm:L})}}:{},Z=(0,l.A)({analyticsName:"addToRegistry",context:g,pageTitle:v,selectLinkName:"registryClick",usItemId:I,addLsExtras:P});return C&&k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{"aria-label":F,className:x,style:u,isFullWidth:p,onClick:O,onLinkExtras:Z.addItemsLabelClick,onLinkName:R,size:"small",variant:k,children:_}),G&&(0,i.jsx)(A,{analyticsDetails:Z,disableAction:D,initialAction:C,itemImage:y,itemName:f,itemPrice:h,itemType:E,onSuccess:j,pageId:S,pageType:w,title:L,updateCacheOnChoose:V,usItemId:I})]}):(0,i.jsxs)("span",{className:"w-100 ".concat(t),children:[T&&(0,i.jsx)(d.J,{"aria-hidden":!0,name:T,size:"small"}),(0,i.jsx)("span",{className:"f6",ref:b,tabIndex:-1,children:_})]})}},199079:function(e,n,t){t.d(n,{b:function(){return x},Z:function(){return g}});var i=t(247687),a=t(269641),r=t(969538),l=t(78271),s=t(412193),o=t(974942),d=t(191041),c=t(651885),m=t(942569);const u=e=>{let{a11yId:n,list:t,selectList:a,groupName:r,isManageMode:u,showImageTile:x}=e;const g=u&&t.maxItemsReached;return(0,i.jsxs)("span",{className:"flex sans-serif bg-white bw0 w-100 pointer ph0",onClick:()=>a(t),children:[(0,i.jsxs)("span",{"aria-hidden":!0,className:"flex-grow-1 tl",children:[(0,i.jsx)("span",{id:"".concat(r,"name-id-").concat(n),className:"mid-gray f6 normal word-wrap",children:(0,i.jsx)(l.LineClamp,{lines:2,"data-qm-mask":!0,children:t.name})}),t.ownerName&&(0,i.jsxs)("span",{id:"owner-id-".concat(n),className:"gray f7 normal","data-qm-mask":!0,children:[(0,s.m)(m,"owner")," ",t.ownerName]}),t.showPrimary&&(0,i.jsxs)("span",{id:"favorite-id-".concat(n),className:"gray f7 normal flex items-center",children:[(0,i.jsx)(o.J,{"aria-hidden":!0,className:"mr2 primary",name:"HeartFill"}),(0,s.m)(m,"favorites")]}),g&&(0,i.jsxs)("span",{id:"max-list-id-".concat(n),className:"gray f7 normal flex items-center",children:[(0,i.jsx)(o.J,{"aria-hidden":!0,className:"mr1 blue",name:"InfoCircle"}),(0,s.m)(m,"maxListItemsInlineMessage")]})]}),x&&(0,i.jsx)(d.Z,{alt:t.recentItemName?"last added ".concat(t.recentItemName):"",className:"ml4",src:(0,c.P)({src:t.recentItemImage,height:"48",width:"48"}),height:48,width:48,preload:!0})]})};const x=e=>{let{allowRadioNav:n,analyticsDetails:t,lists:l,selectedList:s,selectList:o,isManageMode:d,groupName:c="",showImageTile:m=!0}=e;const x=(0,r.useRef)([]);x.current=l.map(()=>(0,r.createRef)());const g=(0,r.useCallback)(()=>l.findIndex(e=>e.id===s.id),[l,s]);return(0,r.useEffect)(()=>{if(n){const n=g();var e;if(n>=0)null===(e=x.current[n].current)||void 0===e||e.focus()}},[n,g]),(0,i.jsx)("ul",{className:"pa0 ma0",role:"radiogroup",children:l.map((e,n)=>{const r=x.current[n],l=d&&e.maxItemsReached;return(0,i.jsxs)("li",{className:"flex list w-100 pv3 b--near-white pointer ".concat(n?"bt":""),children:[(0,i.jsx)(a.Z,{a11yLabelledBy:"".concat(c,"name-id-").concat(n," favorite-id-").concat(n," owner-id-").concat(n," max-list-id-").concat(n),checked:e.id===s.id&&!l,className:"pr1 mr2",name:"list",onLinkName:t.selectLinkName,onChange:()=>o(e),onLinkExtras:t.onListSelect(e),ref:r,disabled:l}),(0,i.jsx)(u,{a11yId:n,list:e,selectList:o,isManageMode:d,showImageTile:m,groupName:c})]},"list-tile-".concat(e.id))})})};var g=x},809366:function(e,n,t){t.d(n,{SC:function(){return s},qB:function(){return c}});var i=t(412193),a=t(985091),r=t(187905);const l="UNAUTHENTICATED";function s(e){return e instanceof Error?e:new Error(String(e))}const o=e=>{var n;return!!(null===e||void 0===e||null===(n=e.errors)||void 0===n?void 0:n.some(e=>{var n;return(null===(n=e.extensions)||void 0===n?void 0:n.code)===l}))},d=e=>{let{errors:n,defaultErrorMessage:t=(0,i.m)(a,"genericErrorText")}=e;const{message:r,extensions:{serviceName:l,code:s}}=n&&n[0]||{message:t,extensions:{serviceName:"",code:"Non GQL Error"}},o=new Error("ce-smartlists"===l&&"INTERNAL_SERVER_ERROR"!==s?r:t);return o.name=s,o},c=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>!1;return e.then(e=>{const s=e.errors;return(0,r.jg)({...n,additionalTags:[s&&s.length?r.Hi.TAGS.GQL_CALL_FAILURE:r.Hi.TAGS.GQL_CALL_SUCCESS],errors:s}),o(e)?Promise.reject(new Error(l)):s&&(t||a(e))?Promise.reject(d({errors:s,defaultErrorMessage:i})):e},e=>((0,r.jg)({...n,additionalTags:[r.Hi.TAGS.GQL_CALL_FAILURE],errors:e}),Promise.reject(d({defaultErrorMessage:i}))))}},204216:function(e,n,t){t.d(n,{I:function(){return a},l:function(){return r}});var i=t(251700);const a={get:()=>{var e,n;return null===(n=null===(e=(0,i.p)())||void 0===e?void 0:e.get())||void 0===n?void 0:n.listRegistry},set:e=>{var n;return null===(n=(0,i.p)())||void 0===n?void 0:n.set({listRegistry:e})},remove:()=>{var e;const n=null===(e=(0,i.p)())||void 0===e?void 0:e.get();if(n){var t;const{listRegistry:e,...a}=n;null===(t=(0,i.p)())||void 0===t||t.set(a)}}},r=e=>{let{pageId:n,pageType:t,title:i,scope:r="registry"}=e;return null===a||void 0===a?void 0:a.set({lastModified:Date.now(),moduleVariant:"CHOOSE_ADD",pageId:n,pageType:t,scope:r,title:i})}},187905:function(e,n,t){t.d(n,{Hi:function(){return a},e$:function(){return l},jg:function(){return r}});var i=t(190294);const a={SCOPE:"lists",LEVELS:{WARN:"warn",ERROR:"error",INFO:"info"},TAGS:{GQL_CALL_SUCCESS:"gqlSuccess",GQL_CALL_FAILURE:"gqlFailure",IS_SERVER_SIDE:"ssr",IS_CLIENT_SIDE:"csr",TRANSFORM_FAILURE:"transformFailure",NO_RESULTS_CONTAINER:"noResultsContainer",ADD_TO_CART:"addToCart",ADD_TO_CART_FAILURE:"atcFailure",ADD_TO_CART_CLICK:"atcClick"}},r=e=>{let{additionalInfo:n,additionalTags:t=[],apiName:r,errors:l,gqlVariables:s,isServerSide:o=!1,queryKey:d,loggingEnable:c=!0}=e;c&&(0,i.cM)([l?a.LEVELS.ERROR:a.LEVELS.INFO,a.SCOPE,o?a.TAGS.IS_SERVER_SIDE:a.TAGS.IS_CLIENT_SIDE,...t],{type:"log",...(n&&n),...(s&&{gqlVariables:s}),queryKey:d,apiName:r,isServerSide:String(o),...(l&&{errors:Array.isArray(l)?l:[{message:l.message||"unknown",stack:l.stack||"unknown"}]})})},l=e=>e instanceof Error?e.message:String(e)},311342:function(e,n,t){t.d(n,{Z:function(){return S}});var i=t(78271),a=t(412193),r=t(541051),l=t(948668),s=t(130903),o=t(517248),d=t(820491),c=t(289747),m=t(23752),u=t(587529),x=t(716243),g=t(788182);const p={type:"mutation",name:"addItemToRegistryLite",hash:"a961f4eb202d8d414fd4a677bed81aa6deb73bd6f650971abcf8ca98ef1b3279"},y=(e,n)=>{let{timeoutMs:t,loggingEnable:i,isMobile:a}=n;return{mutationFn:n=>e.getGqlFetch((0,x.d)(a),{timeoutMs:t})(p,n).then(e=>{const t=e.errors;if((0,g.jg)({apiName:"addItemToRegistryLite",gqlVariables:n,additionalTags:[t&&t.length?g.Hi.TAGS.GQL_CALL_FAILURE:g.Hi.TAGS.GQL_CALL_SUCCESS],errors:t,loggingEnable:i}),t){const e=new Error("Sorry, something went wrong. Try again later.");return e.name=t[0].extensions&&t[0].extensions.code||"Non GQL Error",Promise.reject(e)}return e})}};var f=t(405899),h=t(991570);const E={landingPageQueryKey:u.vf,detailsPageQueryKey:u.gr,snackbarViewClickName:(0,a.m)(f,"viewRegistry"),snackbarViewAnalyticsName:"viewRegistry",successName:"addedToRegistry",getDetailsPage:(e,n)=>"/registry/".concat(e,"/").concat(n)};var S=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E;const x=(0,s.Zq)(),g=(0,o.Z)(),{router:p}=(0,c.tv)(),S=(0,l.wG)(),{addSnack:v}=(0,i.useSnackbar)(),{isMobile:w}=(0,r.vP)(),{timeoutMs:L,loggingEnable:I}=(0,h.M)(),{mutationFn:N}=y(g,{isMobile:w,timeoutMs:L,loggingEnable:I});return(0,d.D)(N,{onSuccess:(i,r)=>{let{input:{registryType:l,registryId:s},name:o,maxItemsReached:d,setShouldToggle:c=m.Z,reFetchDetailsPage:g=!0,handleSuccess:y=m.Z}=r;d&&c(!0),x.invalidateQueries(u.landingPageQueryKey),g&&x.invalidateQueries(u.detailsPageQueryKey);const h={name:o,type:l,id:s};if(t){const n=e.addItemsSuccess(h);S({context:e.context,action:"moduleView",name:u.successName,payload:n})}n&&setTimeout(()=>v({message:(0,a.m)(f,"savedTo",{name:o}),actionButtonProps:{children:u.snackbarViewClickName,onClick:()=>{const n=e.viewClick(h);S({context:e.context,action:"onLink",name:u.snackbarViewAnalyticsName,payload:n}),p.push(u.getDetailsPage(l,s))}},"data-qm-mask":"true"}),1e3),y()},onError:(e,n)=>{let{setPage:t=m.Z,openMaxItemModal:i=m.Z,handleMaxItem:a=m.Z,handleError:r=m.Z}=n;"LSE-4057"===e.name?(t("maxItemLimitContentKey"),i(),a()):p.query.type?t("errorAddItemContentKey"):r()}})}},80835:function(e,n,t){t.d(n,{Z:function(){return x}});var i=t(541051),a=t(517248),r=t(75572),l=t(716243),s=t(587529),o=t(788182),d=t(735200),c=t(625389);const m={type:"query",name:"getRegistries",hash:"78bdb638256537f036ca2fc5b7201cbef4715b39fa701562f52d56ea4e17a169"};var u=t(991570);var x=()=>{const e=(0,a.Z)(),{isMobile:n}=(0,i.vP)(),{timeoutMs:t,loggingEnable:x}=(0,u.M)(),g=((e,n)=>{let{timeoutMs:t,loggingEnable:i,isMobile:a}=n;return{queryFn:()=>(0,c.u)(e.getGqlFetch((0,l.d)(a),{timeoutMs:t})(m),d.ZP).then(e=>{const n=e.errors;return(0,o.jg)({apiName:"shoppingLists",queryKey:[s.vf,"add-items"],additionalTags:[n&&n.length?o.Hi.TAGS.GQL_CALL_FAILURE:o.Hi.TAGS.GQL_CALL_SUCCESS],errors:n,loggingEnable:i}),e}),queryKey:[s.vf,"add-items"]}})(e,{isMobile:n,timeoutMs:t,loggingEnable:x}),{data:p,error:y,isFetching:f,isLoading:h,isStale:E,refetch:S,isSuccess:v}=(0,r.a)({...g,config:{enabled:!1,refetchOnWindowFocus:!1,staleTime:1/0}}),w=(null===p||void 0===p?void 0:p.data)||[],L=!!(null===p||void 0===p?void 0:p.errors)||!!y;return{isFetchError:L,lists:w,isSuccess:v,refetch:()=>{(E||L)&&S()},showSpinner:f||h}}}}]);