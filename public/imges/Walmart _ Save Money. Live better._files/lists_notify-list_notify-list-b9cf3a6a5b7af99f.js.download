"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18482],{226727:function(e,n,t){t.d(n,{Z:function(){return x}});var i=t(247687),l=t(412193),a=t(541051),r=t(974942),o=t(324523),d=t.n(o),s=t(969538),c=t(396266),u=t(713774);const m=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var t;const i="US-B2B"===(null===(t=(0,u.B)().publicRuntimeConfig)||void 0===t?void 0:t.nxApplicationName);return i?e:n};var x=e=>{let{backButton:n,children:t,panelClose:o,panelTitle:u,shouldFocusCloseButton:x,titleId:p,customHeaderStyle:y}=e;const{isMobile:f}=(0,a.vP)(),v=(0,s.useRef)(null);return(0,s.useEffect)(()=>{x&&setTimeout(()=>{var e;null===(e=v.current)||void 0===e||e.focus()},0)},[x]),(0,i.jsxs)("div",{className:d()("flex flex-row-reverse items-start justify-between",{"bg-primary pa4 pr3 bb b--near-white":!f,"pa2 b":f},m("bg-secondary")),style:y,children:[(0,i.jsx)("button",{"aria-label":(0,l.m)(c,"closeLabel"),className:d()("bg-transparent bn dib ma0 pa2 pointer",f?"black":"white",m("white")),onClick:o,ref:v,style:{height:40,width:40},type:"button",children:(0,i.jsx)(r.J,{name:"Close",size:"medium"})}),(0,i.jsx)("h2",{id:p,className:d()("flex-auto lh-title",{"white f2 ma0 mt1":!f,"black f4 ma2":f},m("white")),children:u||t}),n&&n]})}},320063:function(e,n,t){t.d(n,{Z:function(){return ae}});var i={};t.r(i),t.d(i,{backInStockEmail:function(){return V},notifyMeBtnLabel:function(){return C},notifyMeBtnText:function(){return A},notifyMeError:function(){return k},notifyMePreOrderBtnLabel:function(){return F},preOrderInStockEmail:function(){return M}});var l={};t.r(l),t.d(l,{closeDialog:function(){return Y},notifyMeAcknowledgment:function(){return X},notifyMeDescription:function(){return D},notifyMePreOrderDescription:function(){return $},notifyMeText:function(){return Z},privacyLinkAriaLabel:function(){return J},promotionalEmailCheckbox:function(){return z},promotionalEmailOffer:function(){return K},termsLinkAriaLabel:function(){return H}});var a=t(247687),r=t(708165),o=t(77207),d=t(273060);var s=t(809366),c=t(541051),u=t(517248),m=t(75572);const x=e=>{var n,t;return null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.account)||void 0===t?void 0:t.marketingPrivacy.marketingEmail.subscribed};var p=t(716243);const y="lists-email-marketing",f={type:"query",name:"getMarketingEmailPrivacyPreference",hash:"3d5825a561d5a5ce7058c6a8941de6801a966886af428ebedd6a3ea7c4b87595"},v=()=>{const e=(0,u.Z)(),n=(0,d.iC)(o._).list.values,{timeoutMs:t,loggingEnable:i}=n||{},{isMobile:l}=(0,c.vP)(),a=((e,n)=>{let{timeoutMs:t,loggingEnable:i,isMobile:l}=n;return{queryFn:()=>(0,s.qB)(e.getGqlFetch((0,p.d)(l),{timeoutMs:t})(f),{apiName:"getMarketingEmailPrivacyPreference",queryKey:[y],loggingEnable:i},!0),queryKey:[y]}})(e,{timeoutMs:t,loggingEnable:i,isMobile:l}),{data:r,isLoading:v,isFetching:b,refetch:w}=(0,m.a)({...a,config:{enabled:!1,staleTime:1/0,cacheTime:0}});return{fetchEmailMarketingPref:w,showSpinner:v||b,subscribedData:x(r)}};var b=t(820491);const w={type:"mutation",name:"updateMarketingEmailPreference",hash:"bb94a30b8c0749c71728a7b92b559186f09f4d7ed99df764f7f8c199edb1908e"},g=()=>{var e;const n=(0,u.Z)(),{isMobile:t}=(0,c.vP)(),{timeoutMs:i,loggingEnable:l}=(null===(e=(0,d.iC)(o._).list)||void 0===e?void 0:e.values)||{},{mutationFn:a}=((e,n)=>{let{timeoutMs:t,loggingEnable:i,isMobile:l}=n;return{mutationFn:n=>(0,s.qB)(e.getGqlFetch((0,p.d)(l),{disableAuthFetch:!0,timeoutMs:t})(w,{input:n}),{apiName:"updateMarketingEmailPreference",loggingEnable:i})}})(n,{timeoutMs:i,loggingEnable:l,isMobile:t}),[r]=(0,b.D)(a);return{updateMarketingEmailPreference:r}};var E=t(573893),N=t(412193),L=t(23752),h=t(344629),I=t(590602),S=t(969538);const A=()=>"Notify me",C=e=>"Notify me when back in stock: "+e.productName,k=()=>"We couldn't process your request. Please try again.",V=()=>"Got it. We'll send an email when it's back in stock.",F=()=>"Get notified when this item is available",M=()=>"Got it. We'll email you as soon as the item is available.";var P=t(456590),T=t(78271),j=t(948668);const O="notifyListBIS";var _=t(226727),W=t(997603),q=t(10552),U=t(647312),G=t(191041),B=t(651885),R=t(545359),Q=t(626051);const Z=()=>"Notify me",z=()=>"Send me emails about new arrivals, hot items, daily savings and more.",X=e=>S.createElement(S.Fragment,[],"By signing up for our promotional emails, you acknowledge you have read and agreed to our ",function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return(e&&"object"===typeof e?e.fmt:t)(n)}(e.terms,Q.Ys((e=>e&&"object"===typeof e&&"val"in e?e.val:e)(e.terms),{other:"Terms of Use"}))," and ",function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return(e&&"object"===typeof e?e.fmt:t)(n)}(e.privacy,Q.Ys((e=>e&&"object"===typeof e&&"val"in e?e.val:e)(e.privacy),{other:"Privacy Policy"})),"."),D=()=>"We'll send you an email when it's back in stock: ",K=()=>"Want other updates?",H=()=>"Terms of Use, opens in new window",J=()=>"Privacy Policy, opens in new window",Y=()=>"Close dialog",$=()=>"We\u2019ll email you as soon as this item is available",ee=125,ne=e=>{let{analyticsContext:n,analyticsContent:t,analyticsName:i,onClick:r,onClose:o,isOpen:d,itemName:s,itemImage:u,pageTitle:m,isPreOrderOOSItem:x}=e;const{0:p,1:y}=(0,S.useState)(!1),{isMobile:f}=(0,c.vP)(),v=(0,S.useRef)(null);return(0,a.jsx)(E.ZP,{alternateObservationPoint:v,moduleContext:n,moduleViewExtras:t,moduleLinkExtras:t,name:i,pageTitle:m,shouldSuppressModuleView:!d,children:(0,a.jsx)(q.Z,{children:(0,a.jsxs)(U.Z,{closeButtonProps:{"aria-label":(0,N.m)(l,"closeDialog")},isOpen:d,actions:(0,a.jsxs)("div",{className:"flex flex-column",children:[(0,a.jsx)("p",{id:"notification-terms-id",className:"f7 gray lh-title mt0 tc",children:(0,N.m)(l,"notifyMeAcknowledgment",{terms:{fmt:e=>(0,a.jsx)(R.ZP,{"aria-label":(0,N.m)(l,"termsLinkAriaLabel"),href:"https://help.walmart.com/app/answers/detail/a_id/8",target:"_blank",onLinkName:"termsOfUse",children:e})},privacy:{fmt:e=>(0,a.jsx)(R.ZP,{"aria-label":(0,N.m)(l,"privacyLinkAriaLabel"),href:"https://corporate.walmart.com/privacy-security/walmart-privacy-policy",target:"_blank",onLinkName:"privacyPolicy",children:e})}})}),(0,a.jsx)("div",{className:"w-100",ref:v,children:(0,a.jsx)(h.Z,{"aria-describedby":"notification-terms-id",onClick:()=>{r(p),o()},isFullWidth:!0,variant:"primary",size:"medium",onLinkName:"notifyMe",onLinkExtras:{pg:{nm:n},ta:{pt:n}},children:(0,N.m)(l,"notifyMeText")})})]}),"aria-labelledby":"notify-me-desc-id",desktopComponent:"panel",mobileComponent:"bottomsheet",onClose:o,position:"right",size:"medium",title:f?(0,N.m)(l,"notifyMeText"):e=>{let{titleId:n}=e;return(0,a.jsx)(_.Z,{panelClose:o,titleId:n,shouldFocusCloseButton:!0,children:(0,N.m)(l,"notifyMeText")})},children:[(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)(G.Z,{alt:"",className:"mt2 mb4",height:ee,preload:!1,src:(0,B.P)({src:u,height:String(ee),width:String(ee)}),width:ee})}),(0,a.jsx)("p",{id:"notify-me-desc-id",className:"lh-copy f5 mt0 mb3",children:(0,a.jsx)(T.LineClamp,{lines:2,children:x?(0,N.m)(l,"notifyMePreOrderDescription"):"".concat((0,N.m)(l,"notifyMeDescription")," ").concat(s)})}),(0,a.jsx)("p",{className:"f5 mt0 mb3",children:(0,N.m)(l,"promotionalEmailOffer")}),(0,a.jsx)("div",{className:"mt3",children:(0,a.jsx)(W.Z,{checked:p,label:(0,N.m)(l,"promotionalEmailCheckbox"),onChange:()=>y(e=>!e),onLinkName:"otherUpdates"})})]})})})},te="notifyMe",ie={co:{ov:te}},le=e=>{let{analyticsDetails:n,pageType:t,pageTitle:l,analyticsContext:o,itemImageUrl:d,itemName:c,usItemId:u,isPreOrderOOSItem:m,a11yButtonLabel:p,className:y="",buttonVariant:f="tertiary",failureCallBack:b=L.Z,successCallBack:w=L.Z,showSuccessSnackBar:A=!0,idToFocus:C,...k}=e;const V=(0,S.useRef)(null),F=p||(0,N.m)(i,"notifyMeBtnLabel",{productName:c}),{0:M,1:_}=(0,S.useState)(!1),{isBackFromSignInItem:W,isLoggedIn:q,goToSignIn:U}=(0,r.x)(),{subscribedData:G,fetchEmailMarketingPref:B,showSpinner:R}=v(),{notifyList:Q,isLoading:Z}=(e=>{let{onSuccess:n=L.Z,onError:t=L.Z,closeModal:l,showSuccessSnackBar:a,analyticsContext:o,isPreOrderOOSItem:d}=e;const{addSnack:s}=(0,T.useSnackbar)(),{setNotifyListCache:c}=(0,r.x)(),u=(0,j.wG)();return(0,P.K)({onSuccess:e=>{let{data:t}=e;const r=t.addToNotifyList.usItemIds.filter(e=>e);if(!r.length)throw new Error("GQL returned no items");if(c(r),n(),a){const e=d?(0,N.m)(i,"preOrderInStockEmail"):(0,N.m)(i,"backInStockEmail");u({context:o,action:"message",name:O,payload:{pg:{nm:o},ta:{pt:o},ms:{tx:e,ty:O}}}),setTimeout(()=>s({message:e}),1e3)}l()},onError:e=>{t();const n=(0,N.m)(i,"notifyMeError");u({context:o,action:"error",name:O,payload:{pg:{nm:o},ta:{pt:o},er:{dt:O,ec:e.name||e.message||"",ty:"server",ms:n}}}),s({message:n}),l()}})})({onSuccess:w,onError:b,closeModal:()=>(()=>{var e;C&&(null===(e=document.querySelector("#".concat(C)))||void 0===e||e.focus()),_(!1)})(),showSuccessSnackBar:A,analyticsContext:o,isPreOrderOOSItem:m}),{updateMarketingEmailPreference:z}=g(),X=e=>{Q({include:["items"],items:[{usItemId:u}]}),e&&z({...G,all:!0,newsEmail:!0,source:t})},D=()=>{q?(V.current=u,(0,s.qB)(B(),{apiName:"getMarketingEmailPrivacyPreference",queryKey:["lists-email-marketing"],loggingEnable:!0},!0).then(e=>{let{data:n,error:t}=e;var i;"UNAUTHENTICATED"!==(null===t||void 0===t?void 0:t.message)?!1===(null===(i=x(n))||void 0===i?void 0:i.newsEmail)?_(!0):X(!1):U(u)}).catch(()=>{X(!1)}).finally(()=>{V.current=null})):U(u)};return(0,S.useEffect)(()=>{W(u)&&D()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.ZP,{className:y,moduleContext:o,moduleLinkExtras:n,name:"",pageTitle:l,shouldSuppressModuleView:!0,noSection:!0,children:(0,a.jsx)(h.Z,{...k,"aria-label":F,onClick:D,variant:f,onLinkName:te,children:m?(0,N.m)(i,"notifyMePreOrderBtnLabel"):(0,N.m)(i,"notifyMeBtnText")})}),(Z||V.current===u&&R)&&(0,a.jsx)(I.Z,{}),(0,a.jsx)(ne,{analyticsContext:o,analyticsContent:ie,analyticsName:te,isPreOrderOOSItem:m,isOpen:M,itemName:c,itemImage:d,onClose:()=>_(!1),onClick:X,pageTitle:l})]})};var ae=e=>{const{isInNotifyListCache:n}=(0,r.x)(),{backInStockEnable:t}=(()=>{var e,n;const t=null===(e=(0,d.iC)(o._))||void 0===e||null===(n=e.list)||void 0===n?void 0:n.values,{backInStockEnable:i=!1}=t||{};return{backInStockEnable:i}})();return!t||n(e.usItemId)?null:(0,a.jsx)(le,{...e})}}}]);